!function(w){"use strict";w(document).ready(function(){if(w("#size").change(function(){"Button"===w("#size :selected").parent().attr("label")?(w("#wpadcenter_video_autoplay").attr("checked",!0),w("#wpadcenter_video_autoplay").attr("disabled",!0)):w("#wpadcenter_video_autoplay").removeAttr("disabled")}),w("#adsense-adunits button").click(function(e){e.preventDefault();var t=w(e.target);w.ajax({url:ajaxurl,type:"POST",data:{action:"adsense_load_adcode",_wpnonce:AdsenseGAPI.nonce,adunit:t.attr("data-unitid")},success:function(e){w("#adsense-adunits button").text("Load"),t.text("Loaded"),w("#wpadcenter-google-adsense-code").text(e.message),w("#wpadcenter-google-adsense-code").val(e.message),o()},error:function(e,t,a){alert(a)}})}),w(".wpadcenter-additional-tags-select").select2(),w("#geo_countries select.geo_countries").select2(),w('input[name="target-ads-by"]').click(function(){var e=w(this).attr("value");"countries"==e?(w("#geo_cities").hide(),w("#geo_countries").show()):"cities"==e&&(w("#geo_countries").hide(),w("#geo_cities").show())}),w("#limit-ad-impressions-set").prop("checked")?w("#impressions_number").show():w("#impressions_number").hide(),w("#limit-ad-clicks-set").prop("checked")?w("#clicks_number").show():w("#clicks_number").hide(),w("#limit-ad-impressions-set").change(function(){w("#limit-ad-impressions-set").prop("checked")?w("#impressions_number").show():w("#impressions_number").hide()}),w("#limit-ad-clicks-set").change(function(){w("#limit-ad-clicks-set").prop("checked")?w("#clicks_number").show():w("#clicks_number").hide()}),w(".make_radio").click(function(){w(".make_radio").not(this).prop("checked",!1).trigger("change")}),"undefined"!=typeof wpadcenter_render_metaboxes){var a,n=[],d={},e=wpadcenter_render_metaboxes[0],t=wpadcenter_render_metaboxes[1];for(a in e)for(var i in d[a]=e[a].active_meta_box,e[a].active_meta_box)n.push(e[a].active_meta_box[i]);function c(e){var t=d[e];for(a in n)t.includes(n[a])?w("#"+n[a]).show():w("#"+n[a]).hide()}n=_.uniq(n),c(t),"amp_ad"===w("#ad-type :selected").val()&&l(),w("#ad-type").change(function(){c(w("#ad-type :selected").val()),l()})}var r=w("#wpadcenter-amp-attributes-container"),t=w("#wpadcenter-amp-add-attr-button");function o(){if(e=w("#wpadcenter-google-adsense-code").val()){var e=(e=w("<div />").html(e)).find("ins"),t=e.attr("data-ad-client");if(t){var a=e.attr("data-ad-slot");if(a){var n="",d="",i="",c=e.attr("data-ad-format"),r=e.attr("style")||"",o=(void 0===c&&-1!=r.indexOf("width")?(n="normal",d=e.css("width").replace("px",""),i=e.css("height").replace("px","")):void 0!==c&&"auto"==c?n="responsive":void 0!==c&&"link"==c?n=-1!=r.indexOf("width")?(d=e.css("width").replace("px",""),i=e.css("height").replace("px",""),"link"):"link-responsive":void 0!==c&&"autorelaxed"==c?n="matched-content":void 0!==c&&"fluid"==c&&(n="in-article"),'<amp-ad type="adsense" data-ad-client="'+t+'" data-ad-slot="'+a+'" ');if(w("#wpadcenterAmpCustomizeAuto").prop("checked"))switch(n){case"normal":case"link":0<d&&0<i&&(o+='layout="fixed" width="'+d+'" height="'+i+'" ');break;case"link-responsive":o+=' width="auto" height="90" layout="fixed-height" ';break;case"responsive":o+='width="100vw" height="320" data-auto-format="rspv" data-full-width><div overflow></div ';break;case"in-article":case"matched-content":o+=' width="auto" height="320" layout="fixed-height" '}w("#wpadcenterAmpCustomizeDynamic").prop("checked")&&(o+='layout="responsive" width="'+w("#wpadcenterAmpCustomizeDynamicWidth").val()+'vw" height="'+w("#wpadcenterAmpCustomizeDynamicHeight").val()+'vw" '),w("#wpadcenterAmpCustomizeStatic").prop("checked")&&(o+='layout="fixed-height" width="auto" height="'+w("#wpadcenterAmpCustomizeStaticHeight").val()+'" '),o=o+">"+"</amp-ad>",w("#wpadcenterAdsenseAmpCode").text(o),w("#wpadcenterAdsenseAmpCode").val(o)}else w("#wpadcenterAdsenseAmpCode").text("Please provide slot ID"),w("#wpadcenterAdsenseAmpCode").val("Please provide slot ID")}else w("#wpadcenterAdsenseAmpCode").text("Please provide Client ID"),w("#wpadcenterAdsenseAmpCode").val("Please provide Client ID")}else w("#wpadcenterAdsenseAmpCode").text(""),w("#wpadcenterAdsenseAmpCode").val("")}function l(){w("#wpadcenter_amp_warning").remove(),"amp_ad"===w("#ad-type :selected").val()&&jQuery.noConflict().ajax({type:"POST",url:"./admin-ajax.php",data:{action:"wpadcenter_pro_display_amp_warning"}}).done(function(e){jQuery(".wp-header-end").after(e)})}function p(e){for(var t="",a=("visual"===e?t=tinymce.get("text_ad_code").getContent():"text"===e&&(t=w("#text-ad .wp-editor-area").val()),w("#wpadcenter_get_text_ad_id").data("value")),n=document.createElement("div"),d=(n.innerHTML=t,n.getElementsByTagName("a")),i=0;i<d.length;i++)d[i].getAttribute("href")&&(d[i].setAttribute("id","wpadcenter_ad"),d[i].setAttribute("data-value",a));t=n.innerHTML;"visual"===e?tinymce.get("text_ad_code").setContent(t):"text"===e&&w("#text-ad .wp-editor-area").val(t)}function s(){window.requestAnimationFrame(function(){var e=w("#wpadcenter_text_ad_bg_color").val(),t=w("#wpadcenter_text_ad_border_color").val(),a=w("#wpadcenter_text_ad_border_width").val(),n=window.tinyMCE.get("text_ad_code").contentAreaContainer.id,d=document.querySelector("#"+n+" iframe").contentDocument.body;w("#"+n+" iframe").css({border:a+"px solid "+t,boxSizing:"border-box"}),document.querySelector("#"+n+" iframe").contentDocument.querySelector("[contenteditable='true']").onblur=function(){p("visual")},d.style.background=e,d.style.maxWidth="none",d.style.margin="0"})}function u(){w("#globalAdditionalRelTagsPreference").prop("checked")?w(".wpadcenter-additional-rel-tag-container").hide():w(".wpadcenter-additional-rel-tag-container").show()}function m(){w("#globalAdditionalCssClassPreference").prop("checked")?w(".wpadcenter-additional-css-class-container").hide():w(".wpadcenter-additional-css-class-container").show()}w(t).click(function(e){e.preventDefault();w(r).append('<div><label>Attribute : </label><input  name="amp-attributes[]" /> = <label>Value : </label><input  name="amp-values[]" /> <button class="wpadcenter-amp-delete-attr-button">Remove</button><br><br></div>')}),w(r).on("click",".wpadcenter-amp-delete-attr-button",function(e){e.preventDefault(),w(this).parent("div").remove()}),w("#ampPreference").prop("checked")?w(".wpadcenterAmpCustomizeSettings").show():w(".wpadcenterAmpCustomizeSettings").hide(),w("#ampPreference").change(function(){w(this).prop("checked")?(o(),w(".wpadcenterAmpCustomizeSettings").show()):(w("#wpadcenterAdsenseAmpCode").text(""),w(".wpadcenterAmpCustomizeSettings").hide())}),w(".wpadcenterAmpCustomize").change(function(){o()}),w("#wpadcenter-google-adsense-code").change(function(){o()}),w("#text-ad").on("DOMNodeInserted",function(e){"mce-path-item"===e.target.className&&s()}),w("#wpadcenter_text_ad_bg_color,#wpadcenter_text_ad_border_color,#wpadcenter_text_ad_border_width").change(function(){s()}),w("#text-ad .wp-editor-area").focusout(function(){p("text")}),u(),m(),w("#globalAdditionalRelTagsPreference").change(u),w("#globalAdditionalCssClassPreference").change(m),w("#wpadcenter-html5-select").change(function(){w("#wpadcenter-html5-select").prop("disabled",!0),w("#wpdcenter-html5-upload").prop("disabled",!1),w(".wpadcenter-active-filename, .wpadcenter-delete-icon-container").css("display","flex"),w("#wpadcenter_html5_filename").text(w("#wpadcenter-html5-select").val().replace(/.*[\/\\]/,"")),w("#wpadcenter-html5-db-filename").val(w("#wpadcenter-html5-select").val().replace(/.*[\/\\]/,""))}),""==w("#wpadcenter-html5-db-filename").val()?w(".wpadcenter-delete-icon-container").css("display","none"):(w("#wpadcenter-html5-select").prop("disabled",!0),w("#wpdcenter-html5-upload").text("Uploaded")),w("#wpadcenter-file-delete").click(function(e){w("#wpdcenter-html5-upload").prop("disabled",!0),w("#wpdcenter-html5-upload").text("Upload Now"),w("#wpadcenter_html5_ad_url, #wpadcenter-html5-select, #wpadcenter-html5-db-filename").val(""),w("#wpadcenter_html5_filename").text(""),w(".wpadcenter-active-filename, .wpadcenter-delete-icon-container").css("display","none"),w("#wpadcenter-html5-select").prop("disabled",!1),w("#wpadcenter-html5-upload-error").css("display","none"),w("#wpadcenter-html5-upload-error").text("")}),w("#wpdcenter-html5-upload").click(function(e){e.preventDefault(),w(this).text("Uploading..");var e=w(this).data("ad_id"),t=wpadcenter_render_metaboxes[2];const a=new FormData;a.append("action","upload_html5_file"),a.append("nonce_security",t),a.append("ad_id",e);t=document.getElementById("wpadcenter-html5-select").files;w.each(t,function(e,t){a.append("html5_uploaded_file",t)}),w.ajax({url:ajaxurl,type:"POST",data:a,processData:!1,contentType:!1,success:function(e){e.success?(w("#wpadcenter_html5_ad_url").val(e.data.ad_url+"index.html"),w("#wpdcenter-html5-upload").text("Uploaded"),w("#wpdcenter-html5-upload").prop("disabled",!0),w("#wpadcenter-html5-upload-error").css("display","none"),w("#wpadcenter-html5-upload-error").text("")):(w("#wpadcenter-html5-upload-error").text(e.data),w("#wpadcenter-html5-upload-error").css("display","block"),w("#wpdcenter-html5-upload").text("Failed, try again"))},error:function(e,t,a){w("#wpdcenter-html5-upload").text("Failed, try again")}})}),w("#wpadcenter_upload_video").click(function(e){var t,a;e.preventDefault(),w(this),(t=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!1})).on("insert",function(){a=t.state().get("selection").first().toJSON(),w.trim(a.url.length)<0||(w("#wpadcenter_video_ad_url").val(a.url),w("#wpadcenter_video_ad_filename").val(a.filename),w("#wpadcenter_video_filename").text(a.filename),w("#wpadcenter_video_filename_container").css("display","block"))}),t.open()}),w("#wpadcenter_video_autoplay").change(function(e){e.preventDefault(),w("#wpadcenter_video_autoplay").prop("checked")?w("#wpadcenter_video_autoplay").val(!0):w("#wpadcenter_video_autoplay").val(!1)}),w("#wpadcenter_video_filename_close").click(function(){w("#wpadcenter_video_filename_container").css("display","none"),w("#wpadcenter_video_ad_url").val("")})})}(jQuery);